<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>ironSource.atom SDK for Node-JS Runtime</h1><p><a href="LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square" alt="License"></a>
<a href="https://ironsource.github.io/atom-node/"><img src="https://img.shields.io/badge/docs-latest-blue.svg" alt="Docs"></a>
<a href="https://coveralls.io/github/ironSource/atom-node?branch=master"><img src="https://coveralls.io/repos/github/ironSource/atom-node/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://travis-ci.org/ironSource/atom-node"><img src="https://travis-ci.org/ironSource/atom-node.svg?branch=master" alt="Build status"></a></p>
<p>atom-node is the official <a href="http://www.ironsrc.com/data-flow-management">ironSource.atom</a> SDK for Node.JS Javascript runtime</p>
<ul>
<li><a href="https://atom.ironsrc.com/#/signup">Signup</a></li>
<li><a href="https://ironsource.github.io/atom-node/">Documentation</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#change-log">Change Log</a></li>
<li><a href="#example">Example</a></li>
</ul>
<h2>Installation</h2><h3>Installation using npm</h3><pre class="prettyprint source lang-sh"><code>$ npm install --save</code></pre><h2>Usage</h2><h3>High Level SDK - &quot;Tracker&quot;</h3><p>The tracker is used for sending events to Atom based on several conditions</p>
<ul>
<li>Every 10 seconds (default)</li>
<li>Number of accumulated events has reached 1000 (default)</li>
<li>Size of accumulated events has reached 128Kb (default)
Case of server side failure (500) the tracker uses an exponential back off mechanism with jitter.
For a list of all available tracker config options, check the docs: <ADD LINK HERE><pre class="prettyprint source lang-js"><code>const AtomTracker = require('atom-node').Tracker;
const params = {
endpoint: &quot;https://track.atom-data.io/&quot;, // Don't change this (unless you have your own DNS CNAME)
auth: &quot;YOUR PRE-SHARED HAMC AUTH KEY&quot;, // Can be found in Atom Console
flushInterval: 10, // Optional, Flushing interval in seconds
bulkLen: 1000, // Optional, Max count for events to send
bulkSize: 128, // Optional, Max size of data in Kb
onError: (data) => {
  console.log(`failed sending ${data}`); // Optional, Callback that Will be called after max retries fail.
}
}
let tracker = new AtomTracker(params);
let payload = {&quot;id&quot;: 123, &quot;strings&quot;: &quot;abcd&quot;};
tracker.track(&quot;STREAM NAME&quot;, payload); // Track an event (flush on the described above conditions)
tracker.flush(); // Flush immediately</code></pre></li>
</ul>
<h3>Tracker Backlog</h3><p>The tracker is using a simple in memory storage for its backlog <ADD LINK HERE>
You can replace it with a custom backlog using the same interface</p>
<pre class="prettyprint source lang-js"><code>const AtomTracker = require('atom-node').Tracker;
const params = {
  backlog: YourCustomBacklogClass()
}
let tracker = new AtomTracker(params);</code></pre><h3>Tracker Logger</h3><p>The tracker is using a simple logger based on console, you can replace it with your own (bunyan for example)</p>
<pre class="prettyprint source lang-js"><code>const AtomTracker = require('atom-node').Tracker;
const params = {
  logger: myLoggerModule
}
let tracker = new AtomTracker(params);</code></pre><h3>Low Level (Basic) SDK</h3><p>The Low Level SDK has 2 methods:  </p>
<ul>
<li>putEvent - Sends a single event to Atom  </li>
<li>putEvents - Sends a bulk (batch) of events to Atom (must be an array)
```js
'use strict';
const AtomReporter = require('atom-node').ISAtom;
const options = {
endpoint: &quot;https://track.atom-data.io/&quot;,
auth: &quot;YOUR_API_KEY&quot;
};</li>
</ul>
<p>let atom = new AtomReporter(options);
let params = {
  stream: &quot;STREAM_NAME&quot;, // Your target stream name
  data: JSON.stringify({name: &quot;iron&quot;, last_name: &quot;Source&quot;}), // Object / Stringified Json
}
// With co (POST):
co(function*() {
  try {
    let res = yield atom.putEvent(params);
    console.log(<code>[Example PutEvent POST] success: ${res.message} ${res.status}</code>);
  } catch (err) {
    console.log(<code>[Example PutEvent POST] failure: ${err.message} ${err.status}</code>);
  }
});</p>
<p>// With Promises
params.method = 'POST';
atom.putEvent(params).then(function (res) {
  console.log(<code>[Example PutEvent POST] success: ${res.message} ${res.status}</code>);
}).catch(function (err) {
  console.log(<code>[Example PutEvent POST] failure: ${err.message} ${err.status}</code>);
});</p>
<p>// PutEvents (batch):
let batchPayload = {
  stream: &quot;STREAM_NAME&quot;, // Your target stream name
  data: [{name: &quot;iron&quot;, last_name: &quot;Beast&quot;},
    {name: &quot;iron2&quot;, last_name: &quot;Beast2&quot;}], // Array with Json / Stringified Json
};
atom.putEvents(batchPayload).then(function (res) {
  console.log(<code>[Example PutEvents POST] success: ${res.message} ${res.status}</code>);
}, function (err) {
  console.log(<code>[Example PutEvents POST] failure: ${err.message} ${err.status}</code>);
});
```</p>
<h2>Change Log</h2><h3>v1.5.0</h3><ul>
<li>Added an option to add a callback on error (after max retries reached)</li>
<li>Updated coverage</li>
<li>Updated README</li>
<li>Updated docs and changed them from apiDoc to JSDoc</li>
<li>Fixed a bug with headers not being sent</li>
<li>Refactored Request class</li>
</ul>
<h3>v1.2.0</h3><ul>
<li>Fixed tracker retry bug - caused by mutating an object that was passed by reference</li>
<li>increased test coverage</li>
<li>Updated README.MD</li>
</ul>
<h3>v1.1.2</h3><ul>
<li>Fixed tests and removed unused dependencies</li>
<li>Updated tests to run on LTS</li>
</ul>
<h3>v1.1.0</h3><ul>
<li>Added tracker</li>
<li>Added Backoff mechanism</li>
</ul>
<h3>v1.0.0</h3><ul>
<li>Basic features: putEvent &amp; putEvents functionalities</li>
</ul>
<h2>Example</h2><p>You can use our <a href="code/example/example.js">example</a> for sending data to Atom.</p>
<h2>License</h2><p><a href="LICENSE">MIT</a></p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="IronSourceAtom.html">IronSourceAtom</a></li><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_getTimestamp">_getTimestamp</a></li><li><a href="global.html#fetchRequest">fetchRequest</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Jan 01 2017 18:33:02 GMT+0200 (IST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>